<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author" content="">
<title>__NAMEYY__预约管理系统</title>
<link href="__PUBLIC__/css/bootstrap.min.css" rel="stylesheet">
<link href="__PUBLIC__/css/metisMenu.css" rel="stylesheet">
<link href="__PUBLIC__/css/sb-admin.css" rel="stylesheet">
<link href="__PUBLIC__/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
<!--[if lt IE 9]>
<script src="__PUBLIC__/js/html5shiv.js"></script>
<script src="__PUBLIC__/js/respond.min.js"></script>
<![endif]-->
<script>
var callback_edit="{:U('Callback/callback_edit')}";
var callback_list="{:U('Callback/callback_list')}";
</script>
</head>
<body>
<div id="wrapper">
  <include file="Public:left" />
  <div id="page-wrapper">
  <include file="Public:position" />
    <div class="container-fluid">
      
      <div class="row common-add-from">
        <form  class="form-horizontal" method="post" role="form" id="AddCallbackForm">
          <input type="hidden" name="callbackid" id="callbackid" value="{$callback_id}"/>
          <div class="form-group">
            <label class="col-md-5  control-label">修改回访：</label>
            <div class="input-text col-md-7">
              <input type="text" class="form-control input-sm" id="callback"  name="callback" value="{$callbackinfo.callback_name}">
            </div>
          </div>
          <div class="form-group">
            <div class="input-text col-md-5 col-md-offset-7 addbtn">
              <button type="submit" class="btn btn-primary col-md-6 col-sm-12 col-xs-12">提交</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<script src="__PUBLIC__/js/jquery.js"></script> 
<script src="__PUBLIC__/js/bootstrap.min.js"></script> 
<script src="__PUBLIC__/js/metisMenu.js"></script> 
<script src="__PUBLIC__/js/sb-admin-2.js"></script> 
<script src="__PUBLIC__/js/validation/jquery.validate.min.js"></script> 
<script src="__PUBLIC__/js/validation/messages_zh.js"></script> 
<script>
$(function(){		
  $("#AddCallbackForm").validate({
    rules:
    {
	  callback: "required",
	  
    },
    messages:
    {
      callback: "回访不能为空！",

    },
submitHandler: function(form) {  //通过之后回调  
     var callback = $("#callback").val(); 
	 var callbackid =$("#callbackid").val(); 
     $.ajax({  
url : callback_edit,  
type : "post",  
dataType : "json",  
data: {'callback':callback,'callbackid':callbackid},
success : function(data) {  
if(data.state==0) {
	alert('该回访已添加过,勿重复添加！');
	location.href=callback_list;
	
}else if(data.state==1){
	
	
	location.href=callback_list;
	
	
	
	}else{
		
		alert('添加失败，请重试！');
		
		}
}  
     });  
         },  
         invalidHandler: function(form, validator) {
       return false;  
          }  
	
	
 });
})
</script>
</body>
</html>
